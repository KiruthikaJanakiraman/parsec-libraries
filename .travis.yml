language: java
jdk:
- oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
after_success:
- ./gradlew coveralls
script:
- test "${TRAVIS_PULL_REQUEST}" == "true" || test "${TRAVIS_BRANCH}" != "master" || ./gradlew bintrayUpload
- if [ -n "${GPG_SIGN_PW}" ]; then ./gradlew uploadArchives closeRepository && sleep 30 && ./gradlew promoteRepository;fi
env:
  global:
  - secure: DtXOOq/+aHLjTvwPTMy8YfBUFgep8PgZ7C+PuSwfiIyx3HUef+PaEyQcafIdTSgYshh/qrNZYzcz+jCrayNdfxa2F5mSQu+NI9Dz9yY00vX/yyO/sEV1U60A9uxphQ8DrYLbg7GeBZ4+VIuW/LQxqKe0ugWTpfJ1kKF+ytaQpgpkfJmRE8eyvMWOjD34ruIWtXqqrNtl+/lySRqVkNRcymY0AhTiaGrBeEO6ki6hb/IcPgUt5sVj4p5iWrb/2dr6PcTbQ1N5xlp3zmlTnURgcz/6Pcor2UrQ1Iz35EsPtkifrsx0uP/X6Xnn/JURMhUcWfapSQZjxM8NDwUR4p8Jqaio1pgk4TOS2aZK0cd6vNW5bVN4jX014X6hiU8F6G4pRt7sDN3cmv7FX/mnNc+hIqxRa41p5vNxk63Vq37VmgT8wVULMiB1SWJ+A2TTdqSxB6U5G/qjI2ZyspfsLnLMEVMscjARtPobqdG7RcWZuQKk5buctasBLl71SF/4qDIssi/qsX2PHZjrrqpb8PbXYRGbUSXocsEBvyXjj532abu5onQiB/fsPaNfRcdWApi7g7Ap7j9sDeXCLlf9FxvAH3WyZLFSJQL2rUIKARM+SmUTPwwSlFobnLWah/GVOBRYn/l3+BdTLpC8CntB31GTLBCsALK+PAPOPcUv+y0BbGs=
  - secure: iUPrJEEM3yJdRXoTckVDwoRlsFLoofz0jRjlpMyAl7BNPpxWv+SSagcBXIVwVEolV8SjyWlXvsrwhVm/4fmQ1rzbocpprEVQyMIzz4z1svpCxXzVPNEZ9myTPDUnTcPxZPEh+BOzFlatKfkjqxap7Cwn88e7KpI2Fwqf2938Ati1R28pADxuf9u1o2DtXVlIjyIlrGpBPJme/fD+aSnNW4aWwvBhVTHlj5YdjVmAGTI7cbJIIaA78pZblEa/N+v271yDblhZnpI1WoCGZrqYS6aLPlZ6Ze0JZLAOq7y27deCAfQ19mk+NBBwUebQB2x4sugZUtzqUgJ0DEvdMEI4HDNzjD+Q32LW6FYS4d2YJqvsiDcmj/7P+MESnjv8jk1afeXGW9taP/3Cz0TJFNdOv9fnG8EvyCmJXM0EzxFVAJXruGz3zgacgedfVhXP+ORQLemQFiVInAGL3VIRQP11pIMRX1X5EQdioJ99ZiHPNl84EwiPcWkYrnyxAu5z6l//R0rVBnfIUrSrFKLL4G/AQQc+s9UeeLUTJ5TFDICCE1i/semSJdqSMGQLyU3k34WCqNLucUSHuM8jwN6yWAos57bFJmAma+Iiqct9Yy7UDE4EUUvjzWeO0VhJyUXlChHzmQhObkpbQIQBF84S2hR3QfSdK6RHS+v+lMlrpbwnTig=
  - secure: qYgp90jT4HfQ0nh8xZWXIL7VW4mRv8VJKeC5bJwtf3XqF8OBY1dEGyKAlzn9WY3hzVBt3bOcme0wh/f6WgPIo2WbM82g1U7tnItZJElG82k+sbWuo6UGNalYpQ3yFpk56f37NBS74XSLPJOEPg9bYVrqeWFTATO6Sz/JnloqP0w6sdfiyM6z/tc5EbxT+KzNDLAHQG3+NuZz5FWESx5IJWht/ogVt0pdLmVxzUIr0YJ/UIRtqhEmmi8g4XXKusWz5vMUCFu0B3n2Fr88QhQdqc430YHBTSPxVA/x5t81WafYbn01Dm4IxWf7+jep5Df+lNqJlyDFBKonoC2w8X7ZWcPqvxCIYyA9Vm/sr28f1DMFjesK3UmocXNAix5p7W70YZdK7CXTGx3Fs9Rh+5I8rEPatZ9VPSV4Zr3G1BazagPymAnRa4dKoGXNo0kSh/KUdJEi8hPbfzi7WpYYg0aCT51ZMNc+ZQsHV1LpKd231SdtUyrBDeMaupTokjVR3SsOq9nEJZ8cBdpyR1oYIPhmAD2YRoGLo+mPPXyDbrKvcRpG77JDLMTndIUQp5/feXgxuuWEePgXRMFKXyyxj8zA7M14aFESjsF0bKxYIUmuMwdWgxHuyhhez9EYikV28Ok1MFQIIlEZ465C8OfgB7x/Su5bhtWI0bbnQIczPqRJ6kA=
  - secure: myJsotdtEPBfSOgWkJGYOX9+c7WELrP8Ahqz8MyPcoW382jkC+IaSWgdUqx5iwWZ9hLf/R420tpcV03VfgTVvno42cDCBnh3vBOV/u/Bi3FBEdA1flgm+a95rAJ2yxS5xSDkhJ7t9sNRGizmO+tV54VTE79PlAS1FAIzw98z3SxRn8AbT10HFx/O0TktiOY/hzXuiOxrzu4uInfMtWUbjkpSNnlzYJgXD+P2nw11HDuFOu53Y4ptg+E8i8wz13Q1z25o33dHCSpb+auShH00/C66th9/B+SW5ynbkp6uNnVHtqinjBqeK+FL9v2nzN23Mgk9Nb6aP579yjpUFm21Hb9pMhksWRYmKx3NdQWqZvgmpd7cwkZQOsqDZYkgwwWb9khFWDglynvLgOlD999D0HKQaemQlHv6Q3hjeVZw+TwvOG/AqLiYIvK0IXCNQaWmXj2RV0NDPuZNzANnAHUDvSXwZiukYH7fIzyt+NZqcEM8G23KurEyS+0opl5UbyWgm5YGkXi8DC5tb1v4VVxWSDYGnOhfJfNWQNHfGXmAKlsm8PJ/TqseNHF/BwQ6LU7dYSvSu7ERt7f56GBaxiDWTN0P2OAJj1SrbWqeERMiKTS9aTGx99+2Z0g+5ow5k3cikDOg34ntm2agj8wfZsbU9CO83EvQXbcoQ0KqTJ+L7K0=
  - secure: eVrAWMXMT9/iHpTR+N4ZLVRAUd20DZTseL/pc+JOAvflHDRhsWcJhp7p5CzqDPEc81FlRkn5Jc+pSYFJ2XeT9483/Lu79SDnrOA/rov0QFVv0W+G9LiRMgsyDOX9C2/MmcE+Dvw2OPCEgESyBTaqXZZF6bsSesFG7Yzx+NrLsKSxpA8ec64InnuhVyLCP80ebq9Tbl1RldncSTg9vGjzXNw0HXOO0aI0v/yrmIybpCmJAtnwD8MpwfLCbFfE6rkEqmPcAbKqQH8inzeQf99geXfu2oW0fTdC06OX+r5i3xy9u5FzjSpqbYtAguZWJReOvitmBCaTMwXDvTQT2dPt1AKhWZqdQ4F21wDIAL4YJAuiq4BUOt/6t/suf0OpkfSwN/UsiF8ePjKOYvZpfvMXtTlQaalzWJxLEz3l+eKDVUzQZ9LaXdZOESUi4q0Bgg6S3/vERFH+xVCg3BqP5AcvpzdbVvK//2nkqMdQHbvlOV2neFFhrstRBrgWqmS4JleYy1TqfX5+GKVvicRk7Mk5BxvGMs47ADCfQPBb0JoLGAr+Wrw9Oe8I/PDyWLH3MOeJLQ7St9icRujLomR/O8P00SCff9rGApR3RCnTQLYt4L9b94+Lg7RaS+NSD9uedXJ0Ic7bQFnrFagEp+7gWEnG5HABgaoSuRyWiyUIbPpV34w=
before_install:
- if [ -n "${encrypted_16f1046f27e3_key}" ] && [ -n "${encrypted_16f1046f27e3_iv}" ]; then openssl aes-256-cbc -K $encrypted_16f1046f27e3_key -iv $encrypted_16f1046f27e3_iv -in mykey.gpg.enc -out mykey.gpg -d ;fi
